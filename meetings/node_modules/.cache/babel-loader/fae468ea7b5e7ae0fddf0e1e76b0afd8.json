{"ast":null,"code":"import _regeneratorRuntime from \"/Users/hyeon/swpp-assign2/assign2/assign2/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getAllMeetingsSaga),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(addMeetingSaga),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(deleteMeetingSaga),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(updateMeetingSaga),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(loginSaga),\n    _marked6 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(rootSaga);\n\nimport { all, call, put, takeLatest, select, takeEvery } from 'redux-saga/effects';\nimport actions from './actions';\nimport * as constants from './constants';\n\nfunction getAllMeetingsSaga() {\n  var meetingsData, option;\n  return _regeneratorRuntime.wrap(function getAllMeetingsSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          option = {\n            method: 'GET',\n            headers: new Headers({\n              // 'Content-Type': 'application/json',\n              // 'Accept': 'application/json',\n              'Access-Control-Allow-Origin': '*',\n              'Access-Control-Allow-Credentials': true\n            }),\n            mode: 'no-cors'\n          };\n          _context.prev = 1;\n          _context.next = 4;\n          return call(fetch, 'http://127.0.0.1:8000/meetings/', option).then(function (response) {\n            meetingsData = response.text();\n          }).catch();\n\n        case 4:\n          console.log(meetingsData);\n          _context.next = 12;\n          break;\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](1);\n          alert('fetch failed fucking!!!!!!' + _context.t0);\n          console.log(meetingsData);\n          return _context.abrupt(\"return\");\n\n        case 12:\n          _context.next = 14;\n          return put(actions.refreshMeetings(meetingsData));\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 7]]);\n}\n\nfunction addMeetingSaga(action) {\n  var state, option, response;\n  return _regeneratorRuntime.wrap(function addMeetingSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return select();\n\n        case 2:\n          state = _context2.sent;\n          option = {\n            method: 'POST',\n            withCredentials: true,\n            credentials: 'include',\n            headers: new Headers({\n              'Authorization': \"Token \".concat(state.auth.token),\n              'Content-Type': 'application/json',\n              'Accept': 'application/json'\n            })\n          };\n          option.body = JSON.stringify(action.meeting);\n          _context2.prev = 5;\n          _context2.next = 8;\n          return call(fetch, 'http://127.0.0.1:8000/meetings/', option);\n\n        case 8:\n          response = _context2.sent;\n\n          if (response.ok) {\n            _context2.next = 12;\n            break;\n          }\n\n          alert('post failed! there is reservation');\n          return _context2.abrupt(\"return\");\n\n        case 12:\n          _context2.next = 18;\n          break;\n\n        case 14:\n          _context2.prev = 14;\n          _context2.t0 = _context2[\"catch\"](5);\n          alert('post failed ' + _context2.t0);\n          return _context2.abrupt(\"return\");\n\n        case 18:\n          _context2.next = 20;\n          return call(getAllMeetingsSaga);\n\n        case 20:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[5, 14]]);\n}\n\nfunction deleteMeetingSaga(action) {\n  var state, option, response;\n  return _regeneratorRuntime.wrap(function deleteMeetingSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return select();\n\n        case 2:\n          state = _context3.sent;\n          option = {\n            method: 'DELETE',\n            withCredentials: true,\n            credentials: 'include',\n            headers: new Headers({\n              'Authorization': \"Token \".concat(state.auth.token),\n              'Content-Type': 'application/json',\n              'Accept': 'application/json'\n            })\n          };\n          _context3.prev = 4;\n          _context3.next = 7;\n          return call(fetch, \"http://127.0.0.1:8000/meetings/\".concat(action.id), option);\n\n        case 7:\n          response = _context3.sent;\n\n          if (response.ok) {\n            _context3.next = 11;\n            break;\n          }\n\n          alert('delete failed! it is not your reservation');\n          return _context3.abrupt(\"return\");\n\n        case 11:\n          _context3.next = 17;\n          break;\n\n        case 13:\n          _context3.prev = 13;\n          _context3.t0 = _context3[\"catch\"](4);\n          alert('delete failed ' + _context3.t0);\n          return _context3.abrupt(\"return\");\n\n        case 17:\n          _context3.next = 19;\n          return call(getAllMeetingsSaga);\n\n        case 19:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[4, 13]]);\n}\n\nfunction updateMeetingSaga(action) {\n  var state, option, response;\n  return _regeneratorRuntime.wrap(function updateMeetingSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return select();\n\n        case 2:\n          state = _context4.sent;\n          option = {\n            method: 'PUT',\n            withCredentials: true,\n            credentials: 'include',\n            headers: new Headers({\n              'Authorization': \"Token \".concat(state.auth.token),\n              'Content-Type': 'application/json',\n              'Accept': 'application/json'\n            })\n          };\n          option.body = JSON.stringify(action.meeting);\n          _context4.prev = 5;\n          _context4.next = 8;\n          return call(fetch, \"http://127.0.0.1:8000/meetings/\".concat(action.meeting.id), option);\n\n        case 8:\n          response = _context4.sent;\n\n          if (response.ok) {\n            _context4.next = 12;\n            break;\n          }\n\n          alert('update failed! it is not your reservation');\n          return _context4.abrupt(\"return\");\n\n        case 12:\n          _context4.next = 18;\n          break;\n\n        case 14:\n          _context4.prev = 14;\n          _context4.t0 = _context4[\"catch\"](5);\n          alert('update failed ' + _context4.t0);\n          return _context4.abrupt(\"return\");\n\n        case 18:\n          _context4.next = 20;\n          return call(getAllMeetingsSaga);\n\n        case 20:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[5, 14]]);\n}\n\nfunction loginSaga(action) {\n  var userInfo, option, response;\n  return _regeneratorRuntime.wrap(function loginSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          option = {\n            method: 'POST',\n            headers: new Headers({\n              'Content-Type': 'application/json',\n              'Accept': 'application/json'\n            })\n          };\n          option.body = JSON.stringify(action.user);\n          _context5.prev = 2;\n          _context5.next = 5;\n          return call(fetch, 'http://127.0.0.1:8000/api-token-auth/', option);\n\n        case 5:\n          response = _context5.sent;\n          userInfo = response.json();\n\n          if (response.ok) {\n            _context5.next = 10;\n            break;\n          }\n\n          alert('login failed! there is reservation');\n          return _context5.abrupt(\"return\");\n\n        case 10:\n          _context5.next = 16;\n          break;\n\n        case 12:\n          _context5.prev = 12;\n          _context5.t0 = _context5[\"catch\"](2);\n          alert('login failed ' + _context5.t0);\n          return _context5.abrupt(\"return\");\n\n        case 16:\n          userInfo.username = action.user.username;\n          _context5.next = 19;\n          return put(actions.loginSuccess(userInfo));\n\n        case 19:\n          _context5.next = 21;\n          return call(getAllMeetingsSaga);\n\n        case 21:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, null, [[2, 12]]);\n}\n\nexport default function rootSaga(api) {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return all([takeLatest(constants.GET_ALL, getAllMeetingsSaga), takeEvery(constants.ADD, addMeetingSaga), takeEvery(constants.DELETE, deleteMeetingSaga), takeEvery(constants.UPDATE, updateMeetingSaga), takeLatest(constants.LOGIN, loginSaga)]);\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}","map":{"version":3,"sources":["/Users/hyeon/swpp-assign2/assign2/assign2/src/store/sagas.js"],"names":["getAllMeetingsSaga","addMeetingSaga","deleteMeetingSaga","updateMeetingSaga","loginSaga","rootSaga","all","call","put","takeLatest","select","takeEvery","actions","constants","option","method","headers","Headers","mode","fetch","then","response","meetingsData","text","catch","console","log","alert","refreshMeetings","action","state","withCredentials","credentials","auth","token","body","JSON","stringify","meeting","ok","id","user","userInfo","json","username","loginSuccess","api","GET_ALL","ADD","DELETE","UPDATE","LOGIN"],"mappings":"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","sourcesContent":["import {\n    all,\n    call,\n    put,\n    takeLatest,\n    select,\n    takeEvery,\n} from 'redux-saga/effects';\nimport actions from './actions';\nimport * as constants from './constants';\n\nfunction* getAllMeetingsSaga() {\n    let meetingsData;\n    const option = {\n        method: 'GET',\n        headers: new Headers({\n            // 'Content-Type': 'application/json',\n            // 'Accept': 'application/json',\n            'Access-Control-Allow-Origin' : '*',\n            'Access-Control-Allow-Credentials' : true,\n        }),\n        mode: 'no-cors',\n    };\n    try {\n        //const response = yield call(fetch, 'http://127.0.0.1:8000/meetings/',option);\n        //meetingsData = response.json();\n        yield call(fetch, 'http://127.0.0.1:8000/meetings/', option).then(\n            (response) => {\n                meetingsData = response.text();\n            }\n        ).catch();\n        console.log(meetingsData);\n    } catch (e) {\n        alert('fetch failed fucking!!!!!!' + e);\n        console.log(meetingsData);\n        return;\n    }\n    yield put(actions.refreshMeetings(meetingsData));\n}\n\nfunction* addMeetingSaga(action) {\n    const state = yield select();\n    const option = {\n        method: 'POST',\n        withCredentials: true,\n        credentials: 'include',\n        headers: new Headers({\n            'Authorization': `Token ${state.auth.token}`,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }),\n    };\n    option.body = JSON.stringify(action.meeting);\n    try {\n        const response = yield call(fetch, 'http://127.0.0.1:8000/meetings/', option);\n        if (!response.ok) {\n            alert('post failed! there is reservation');\n            return;\n        }\n    } catch (e) {\n        alert('post failed ' + e);\n        return;\n    }\n    yield call(getAllMeetingsSaga);\n}\n\nfunction* deleteMeetingSaga(action) {\n    const state = yield select();\n    const option = {\n        method: 'DELETE',\n        withCredentials: true,\n        credentials: 'include',\n        headers: new Headers({\n            'Authorization': `Token ${state.auth.token}`,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }),\n    };\n    try {\n        const response = yield call(fetch, `http://127.0.0.1:8000/meetings/${action.id}`, option);\n        if (!response.ok) {\n            alert('delete failed! it is not your reservation');\n            return;\n        }\n    } catch (e) {\n        alert('delete failed ' + e);\n        return;\n    }\n    yield call(getAllMeetingsSaga);\n}\n\nfunction* updateMeetingSaga(action) {\n    const state = yield select();\n    const option = {\n        method: 'PUT',\n        withCredentials: true,\n        credentials: 'include',\n        headers: new Headers({\n            'Authorization': `Token ${state.auth.token}`,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }),\n    };\n    option.body = JSON.stringify(action.meeting);\n    try {\n        const response = yield call(fetch, `http://127.0.0.1:8000/meetings/${action.meeting.id}`, option);\n        if (!response.ok) {\n            alert('update failed! it is not your reservation');\n            return;\n        }\n    } catch (e) {\n        alert('update failed ' + e);\n        return;\n    }\n    yield call(getAllMeetingsSaga);\n}\n\nfunction* loginSaga(action) {\n    let userInfo;\n    const option = {\n        method: 'POST',\n        headers: new Headers({\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n        }),\n    };\n    option.body = JSON.stringify(action.user);\n    try {\n        const response = yield call(fetch, 'http://127.0.0.1:8000/api-token-auth/', option);\n        userInfo = response.json();\n        if (!response.ok) {\n            alert('login failed! there is reservation');\n            return;\n        }\n    } catch (e) {\n        alert('login failed ' + e);\n        return;\n    }\n    userInfo.username = action.user.username;\n    yield put(actions.loginSuccess(userInfo));\n    yield call(getAllMeetingsSaga);\n}\n\nexport default function* rootSaga(api) {\n    yield all([\n        takeLatest(constants.GET_ALL, getAllMeetingsSaga),\n        takeEvery(constants.ADD, addMeetingSaga),\n        takeEvery(constants.DELETE, deleteMeetingSaga),\n        takeEvery(constants.UPDATE, updateMeetingSaga),\n        takeLatest(constants.LOGIN, loginSaga),\n    ]);\n}\n"]},"metadata":{},"sourceType":"module"}